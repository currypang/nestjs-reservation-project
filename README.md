## 1. 프로젝트의 목표

- NestJs, TypeScript, TypeOrm을 이용하여 온라인 공연 예매 서비스를 개발합니다.

## 2. [api](https://rift-gallium-045.notion.site/Node-js-API-88f88700ad95448898e38bbc53f95545?pvs=4)

## 3. [ERD](https://drawsql.app/teams/currypangs-team/diagrams/reservation-project)

도메인: https://currypang.shop/

## 4. 구현한 필수 요구 사항

### 로그인, 회원가입, 프로필 기능, 토큰 재발급, 로그 아웃 구현

- **로그인/회원가입 API**
  - 사용자 계정으로 로그인/회원가입 합니다.
  - 가입 시 **100만 포인트를 지급**합니다.
  - JWT 방식을 사용하여 accessToken, refreshToken을 발급합니다.
  - refreshToken은 DB에 저장합니다.
  - Cookie가 아니라 Authorization Header를 이용한 인증 방식
- **프로필 API**
  - 사용자 정보를 볼 수 있는 API 입니다.
  - 필수로 볼 수 있는 정보로는 닉네임, 포인트입니다.
- **토큰 재발급, 로그 아웃 구현**
  - 토큰 재발급과 로그 아웃을 구현해 refreshToken을 컨트롤 할 수 있게합니다.

### 공연장 등록 기능, 새 공연 등록 기능 및 공연 목록 보기, 공연 검색하기, 공연 상세보기 기능 구현

- **공연장 등록 API**
  - 공연장 이름, 등급별 좌석 수, 카테고리 정보를 가진 공연장을 등록합니다.
- **공연 등록 API**
  - 사전에 어드민으로 지정된 유저만 해당 API를 호출할 수 있습니다.
  - 유저를 어드민으로 지정하는 것 방법은 특정 컬럼에 어드민 여부 또는 역할을 저장합니다.
  - 어드민은 새로운 공연을 해당 API를 통해서 등록할 수 있습니다.
  - 공연을 등록하면 해당 공연의 각 회차 별 시간정보와, 공연 정보, 장소 정보를 가지는 showTime 테이블에 데이터가 생성됩니다.
  - 공연을 등록하면 해당 공연의 각 시간대의 예매가능한 등급별 좌석들이 seats 테이블에 생성됩니다.
  - multer를 이용해 s3 버킷에 이미지를 업로드합니다.
- **공연 조회 API**
  - 공연의 리스트를 조회합니다.
  - 전체, 카테고리 별로 나뉘어서 조회 가능합니다.
- **공연 검색 API**
  - 공연명으로 공연을 검색합니다.
  - 검색 결과를 반환합니다.
- **공연 상세보기 API**
  - 해당 공연의 정보를 반환합니다.
  - 현재 예매가 가능한지 여부를 반환합니다.
- **예매 목록 확인 API**
  - 사용자가 예매하거나 과거에 예매한 공연들의 내역을 반환합니다.
  - 목록은 예매 날짜 기준 **최신 순으로 정렬**하도록 합니다.

## 4. 구현한 추가 요구 사항

### 공연의 좌석 예매 정보 확인, 좌석 지정 예매, 예매 취소 기능 구현

- **예매 취소 API**

  - 사용자가 선택한 예매를 취소합니다.
  - 취소 확인 메시지를 포함합니다.
  - **공연 시작 3시간 전까지만 예매를 취소**할 수 있습니다.
  - 예매 취소 후 예매에 쓰였던 포인트는 환불이 되어야 합니다.

- **공연의 좌석 예매 정보 확인 API**
  - 공연의 좌석 예매 정보 확인 API
  - 예매 가능 좌석 정보 반환하는 기능을 추가합니다.
  - 이게 가능하려면 공연마다 좌석 정보가 관리될 수 있게 ERD가 확장되어야 합니다.
  - 반환 방식 (배열)
- **좌석을 지정하여 예매하기 API**
  - 선택한 좌석의 예매 여부를 확인하고 예매 상태를 업데이트합니다.
  - 한번에 여러 장의 좌석을 예매 할 수 있어야 합니다.
